# Анализ интерактивной модели фаговой устойчивости

## Краткое введение

Данная вычислительная модель была создана для демонстрации и исследования гипотез о том, как **негенетические факторы**, обусловленные процессом производства, могут приводить к кардинальным различиям в устойчивости к бактериофагам у двух генетически идентичных штаммов заквасочной культуры.

Модель сравнивает два сценария:
*   **Производитель 1 (Высокая устойчивость):** Его производственный процесс поддерживает культуру в состоянии, готовом к встрече с фагами.
*   **Производитель 2 (Низкая устойчивость):** Его процесс оптимизирован исключительно под скорость роста, что делает культуру "наивной" и уязвимой к фаговой атаке.

Для объяснения этих различий модель одновременно симулирует две ключевые гипотезы.

## Описание Модели и Реализованных Гипотез

Модель является **агент-ориентированной (Agent-Based Model)**, где независимые агенты (бактерии и фаги) взаимодействуют на 2D-сетке, имитирующей чашку Петри.

### Гипотеза 1: "Цена Устойчивости" и Репертуар Защит

Этот механизм объясняет, как культура может быть готова (или не готова) к атаке на уровне отдельных клеток.

*   **Механизм в модели:**
    *   Каждая **бактерия** обладает атрибутом `defenses` — это множество (set) целых чисел, представляющих активные у нее системы защиты (например, `{2, 5}`).
    *   Каждый **фаг** обладает атрибутом `counters` — множеством "ключей" (`{2, 5, 7}`).
    *   **Правило заражения:** Фаг может заразить бактерию, только если его множество "ключей" полностью "покрывает" (является надмножеством) множество защит бактерии. В примере выше, фаг `{2, 5, 7}` может заразить бактерию `{2, 5}`, но не сможет заразить бактерию с защитой `{2, 6}`.
    *   **Цена устойчивости:** Каждая активная система защиты снижает максимальную скорость роста бактерии. Это реализовано параметром `COST_PER_DEFENSE`. Бактерия без защит (`defenses = {}`) растет с максимальной скоростью, а бактерия с тремя защитами растет значительно медленнее.
    *   **Эволюция:** При делении у потомка есть малая вероятность (`P_MUTATION`) добавить или удалить одну систему защиты, что позволяет популяции адаптироваться.

*   **Как это отражено в сценариях:**
    *   **Производитель 1** начинает с культурой, у которой бактерии уже имеют 2-3 активные системы защиты. Они растут медленнее, но большинство из них изначально неуязвимы для фага с репертуаром `{2, 5, 7}`.
    *   **Производитель 2** начинает с культурой без защит. Его бактерии — чемпионы по скорости роста, но абсолютно беззащитны перед фагом.

### Гипотеза 2: Метаболическая Активность и "Клетки в Убежище"

Этот механизм объясняет, как культура может выживать на популяционном уровне, даже если отдельные клетки уязвимы.

*   **Механизм в модели:**
    *   Бактерии могут находиться в трех состояниях: `ACTIVE` (активная, растет), `REFUGE` ("спящая", в убежище) и `INFECTED` (заражена).
    *   **Правило неуязвимости:** Фаги могут атаковать **только** `ACTIVE` клетки. "Спящие" клетки для них невидимы и неуязвимы.
    *   **Ключевое различие производителей:**
        *   `p_enter_refuge`: Вероятность для активной клетки "уснуть" на одном шаге симуляции.
        *   `p_leave_refuge`: Вероятность для "спящей" клетки "проснуться".
*   **Как это отражено в сценариях:**
    *   **Производитель 1** имеет высокую `p_enter_refuge` (10%). Его производственный процесс как бы "приучает" бактерии быстро реагировать на стресс и "прятаться".
    *   **Производитель 2** имеет очень низкую `p_enter_refuge` (0.1%). Его культура всегда находится в состоянии максимальной метаболической активности.

## Анализ Результатов: Интерпретация Анимации и Графиков

При запуске симуляции мы наблюдаем следующую картину:

1.  **Начальная фаза роста (до внесения фагов, кадры 0-80):**
    *   **Визуализация:** Обе колонии растут. Колония Производителя 2 растет заметно быстрее, так как его бактерии не тратят энергию на поддержание систем защиты.
    *   **График:** Синяя кривая (Бактерии 1) растет медленнее, чем красная (Бактерии 2).

2.  **Внесение фагов (кадр 80):**
    *   **Визуализация:** В обеих чашках появляются красные точки (фаги).
    *   **График:** Появляются пунктирные линии популяций фагов.

3.  **Динамика после заражения:**
    *   **Сценарий Производителя 2 (Уязвимый):**
        *   **Визуализация:** Мы видим катастрофу. Фаги (красные) беспрепятственно заражают бактерии (зеленые), превращая их в зараженные (желтые). После короткой задержки желтые клетки исчезают, порождая огромное количество новых фагов. Волна заражения быстро уничтожает почти всю колонию.
        *   **График:** Красная кривая (Бактерии 2) резко обваливается. Одновременно с этим красная пунктирная линия (Фаги 2) испытывает взрывной рост, а затем, исчерпав ресурс, также падает. Популяция бактерий не восстанавливается.
        *   **Объяснение:** Это происходит потому, что культура "наивна" на двух уровнях: ее клетки **индивидуально беззащитны** (нет репертуара защит) и **популяционно беззащитны** (не умеют "прятаться" в убежище).

    *   **Сценарий Производителя 1 (Устойчивый):**
        *   **Визуализация:** Картина совершенно иная. Фаги уничтожают лишь небольшую часть активных бактерий. Многие бактерии переходят в "спящее" состояние (становятся темно-зелеными) и пережидают атаку. Часть бактерий изначально неуязвима благодаря своему репертуару защит. Фаги, не найдя достаточного количества пищи, постепенно вымирают. После этого "спящие" клетки начинают "просыпаться", и колония восстанавливается.
        *   **График:** Синяя кривая (Бактерии 1) испытывает лишь небольшое падение, за которым следует уверенное восстановление до исходного уровня. Популяция фагов (синяя пунктирная линия) немного возрастает, но быстро угасает.
        *   **Объяснение:** Культура выживает благодаря **комбинации двух стратегий**: индивидуальная защита части клеток (репертуар) замедляет начальную атаку, а популяционная защита ("уход в убежище") сохраняет генофонд для последующего восстановления.

## Заключение

Модель наглядно демонстрирует, что для выживания заквасочной культуры важна не только максимальная скорость роста в стерильных условиях, но и способность противостоять стрессу. Производственный процесс, который поддерживает в культуре фенотипическое разнообразие (разные репертуары защит) и поведенческую гибкость (способность "прятаться"), создает гораздо более надежный и устойчивый продукт.
